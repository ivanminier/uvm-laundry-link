<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.5">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #0e6e6d; -webkit-text-stroke: #0e6e6d}
    p.p3 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; -webkit-text-stroke: #000000; min-height: 16.0px}
    p.p4 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #4d5055; -webkit-text-stroke: #4d5055}
    p.p5 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #18702b; -webkit-text-stroke: #18702b}
    p.p6 {margin: 0.0px 0.0px 0.0px 0.0px; font: 14.0px Menlo; color: #6f0ec3; -webkit-text-stroke: #6f0ec3}
    span.s1 {font-kerning: none; color: #6f0ec3; background-color: #ecf1f7; -webkit-text-stroke: 0px #6f0ec3}
    span.s2 {font-kerning: none; background-color: #ecf1f7}
    span.s3 {font-kerning: none; color: #0e6e6d; background-color: #ecf1f7; -webkit-text-stroke: 0px #0e6e6d}
    span.s4 {font-kerning: none; color: #18702b; background-color: #ecf1f7; -webkit-text-stroke: 0px #18702b}
    span.s5 {font-kerning: none; color: #000000; background-color: #ecf1f7; -webkit-text-stroke: 0px #000000}
    span.s6 {font-kerning: none}
    span.s7 {font-kerning: none; color: #a4450b; background-color: #ecf1f7; -webkit-text-stroke: 0px #a4450b}
    span.s8 {font-kerning: none; color: #6b0001; background-color: #ecf1f7; -webkit-text-stroke: 0px #6b0001}
    span.s9 {font-kerning: none; color: #4d5055; background-color: #ecf1f7; -webkit-text-stroke: 0px #4d5055}
  </style>
</head>
<body>
<p class="p1"><span class="s1">import</span><span class="s2"> </span><span class="s3">React</span><span class="s2">, { useState, useEffect, useCallback } </span><span class="s1">from</span><span class="s2"> </span><span class="s4">'react'</span><span class="s2">;</span></p>
<p class="p2"><span class="s1">import</span><span class="s5"> { </span><span class="s2">Zap</span><span class="s5">, </span><span class="s2">CheckCircle</span><span class="s5">, </span><span class="s2">XCircle</span><span class="s5">, </span><span class="s2">AlertTriangle</span><span class="s5">, </span><span class="s2">Clock</span><span class="s5">, </span><span class="s2">RefreshCw</span><span class="s5">, </span><span class="s2">ChevronDown</span><span class="s5">, </span><span class="s2">ChevronUp</span><span class="s5">, </span><span class="s2">Sun</span><span class="s5">, </span><span class="s2">Moon</span><span class="s5">, </span><span class="s2">Info</span><span class="s5">, </span><span class="s2">Settings</span><span class="s5">, </span><span class="s2">HelpCircle</span><span class="s5">, </span><span class="s2">LogOut</span><span class="s5">, </span><span class="s2">Tag</span><span class="s5">, </span><span class="s2">Package</span><span class="s5">, </span><span class="s2">Home</span><span class="s5">, </span><span class="s2">List</span><span class="s5">, </span><span class="s2">Star</span><span class="s5">, </span><span class="s2">ArrowLeft</span><span class="s5">, </span><span class="s2">Filter</span><span class="s5">, </span><span class="s2">Bell</span><span class="s5">, </span><span class="s2">BellOff</span><span class="s5">, </span><span class="s2">ExternalLink</span><span class="s5">, </span><span class="s2">Droplet</span><span class="s5">, </span><span class="s2">Wind</span><span class="s5">, </span><span class="s2">MessageCircle</span><span class="s5"> } </span><span class="s1">from</span><span class="s5"> </span><span class="s4">'lucide-react'</span><span class="s5">;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p4"><span class="s2">// UVM Catamount Green: #154734</span></p>
<p class="p2"><span class="s1">const</span><span class="s5"> </span><span class="s2">UVM_GREEN</span><span class="s5"> = </span><span class="s4">'#154734'</span><span class="s5">;</span></p>
<p class="p5"><span class="s1">const</span><span class="s5"> </span><span class="s3">UVM_GOLD</span><span class="s5"> = </span><span class="s2">'#fdb515'</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s1">const</span><span class="s5"> </span><span class="s3">UVM_LOGO_URL</span><span class="s5"> = </span><span class="s2">'https://i.imgur.com/kvyrGbL.png'</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p4"><span class="s2">// Helper function to get status color and icon</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> getStatusDetails = (status) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> rawStatus = </span><span class="s3">String</span><span class="s2">(status || </span><span class="s4">'Unknown'</span><span class="s2">).trim();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> lowerStatus = rawStatus.toLowerCase();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s2"> actualStatusOutput = </span><span class="s4">"Unknown"</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s2"> iconElement = &lt;</span><span class="s3">AlertTriangle</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s5"> textColor = </span><span class="s2">'text-gray-700 dark:text-gray-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s5"> bgColor = </span><span class="s2">'bg-gray-100 dark:bg-gray-900'</span><span class="s5">;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> (lowerStatus.includes(</span><span class="s4">'available'</span><span class="s2">)) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>actualStatusOutput = </span><span class="s4">'Available'</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>iconElement = &lt;</span><span class="s3">CheckCircle</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>textColor = </span><span class="s2">'text-green-700 dark:text-green-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>bgColor = </span><span class="s2">'bg-green-100 dark:bg-green-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (lowerStatus.includes(</span><span class="s4">'out of order'</span><span class="s2">) || lowerStatus.includes(</span><span class="s4">'service'</span><span class="s2">) || lowerStatus.includes(</span><span class="s4">'offline'</span><span class="s2">)) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>actualStatusOutput = </span><span class="s4">'Out of Order'</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>iconElement = &lt;</span><span class="s3">XCircle</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>textColor = </span><span class="s2">'text-red-700 dark:text-red-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>bgColor = </span><span class="s2">'bg-red-100 dark:bg-red-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (lowerStatus.includes(</span><span class="s4">'eoc'</span><span class="s2">) || lowerStatus.includes(</span><span class="s4">'cycle finished'</span><span class="s2">) || lowerStatus.includes(</span><span class="s4">'complete'</span><span class="s2">) || lowerStatus.includes(</span><span class="s4">'cycle complete'</span><span class="s2">)) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>actualStatusOutput = </span><span class="s4">'Cycle Finished'</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>iconElement = &lt;</span><span class="s3">CheckCircle</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>textColor = </span><span class="s2">'text-teal-700 dark:text-teal-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>bgColor = </span><span class="s2">'bg-teal-100 dark:bg-teal-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>} </span><span class="s1">else</span><span class="s2"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> timeMatch = rawStatus.match(</span><span class="s8">/(\d+)\s*min/</span><span class="s1">i</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (timeMatch &amp;&amp; parseInt(timeMatch[</span><span class="s7">1</span><span class="s2">], </span><span class="s7">10</span><span class="s2">) &gt; </span><span class="s7">0</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (parseInt(timeMatch[</span><span class="s7">1</span><span class="s2">], </span><span class="s7">10</span><span class="s2">) &lt;= </span><span class="s7">5</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>actualStatusOutput = </span><span class="s4">'Finishing Soon'</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>iconElement = &lt;</span><span class="s3">Clock</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>textColor = </span><span class="s2">'text-yellow-700 dark:text-yellow-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>bgColor = </span><span class="s2">'bg-yellow-100 dark:bg-yellow-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>actualStatusOutput = </span><span class="s4">'In Use'</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>iconElement = &lt;</span><span class="s3">Zap</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>textColor = </span><span class="s2">'text-blue-700 dark:text-blue-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>bgColor = </span><span class="s2">'bg-blue-100 dark:bg-blue-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (lowerStatus.includes(</span><span class="s4">'in use'</span><span class="s2">)) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>actualStatusOutput = </span><span class="s4">'In Use'</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>iconElement = &lt;</span><span class="s3">Zap</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5 flex-shrink-0"</span><span class="s2"> /&gt;;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>textColor = </span><span class="s2">'text-blue-700 dark:text-blue-400'</span><span class="s5">;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>bgColor = </span><span class="s2">'bg-blue-100 dark:bg-blue-900'</span><span class="s5">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (rawStatus &amp;&amp; rawStatus !== </span><span class="s4">'Unknown'</span><span class="s2">) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>actualStatusOutput = rawStatus.replace(</span><span class="s8">/\b\w/</span><span class="s1">g</span><span class="s2">, l =&gt; l.toUpperCase());</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>actualStatusOutput = </span><span class="s4">"Status Unknown"</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> { icon: iconElement, textColor, bgColor, actualStatus: </span><span class="s3">String</span><span class="s2">(actualStatusOutput) };<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> formatTime = (minutes) =&gt; {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s5"> (!minutes || minutes &lt;= </span><span class="s7">0</span><span class="s5">) </span><span class="s1">return</span><span class="s5"> </span><span class="s4">''</span><span class="s5">; </span><span class="s2">// Return empty string if no time</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> h = </span><span class="s3">Math</span><span class="s2">.floor(minutes / </span><span class="s7">60</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> m = minutes % </span><span class="s7">60</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">return</span><span class="s2"> </span><span class="s4">`</span><span class="s2">${h &gt; </span><span class="s7">0</span><span class="s2"> ? </span><span class="s4">`</span><span class="s2">${h}</span><span class="s4">h `</span><span class="s2"> : </span><span class="s4">''</span><span class="s2">}${m}</span><span class="s4">m`</span><span class="s2">;</span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">MachineCard</span><span class="s2"> = </span><span class="s3">React</span><span class="s2">.memo(({ machine, onSetReminder, isReminderSet, onSetUpSmsAlert }) =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> { icon: statusIcon, textColor, bgColor, actualStatus } = getStatusDetails(machine.status);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> canSetReminder = actualStatus === </span><span class="s4">'In Use'</span><span class="s2"> || actualStatus === </span><span class="s4">'Finishing Soon'</span><span class="s2">;</span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s5"> </span><span class="s2">MachineTypeSpecificIcon</span><span class="s5"> = machine.</span><span class="s1">type</span><span class="s5"> === </span><span class="s4">'Washer'</span><span class="s5"> ? </span><span class="s2">Droplet</span><span class="s5"> : </span><span class="s2">Wind</span><span class="s5">;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">let</span><span class="s2"> badgeTextDisplay;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> formattedTimeRemaining = formatTime(machine.timeRemaining);</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">if</span><span class="s2"> ((actualStatus === </span><span class="s4">'In Use'</span><span class="s2"> || actualStatus === </span><span class="s4">'Finishing Soon'</span><span class="s2">) &amp;&amp; formattedTimeRemaining) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>badgeTextDisplay = formattedTimeRemaining;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>badgeTextDisplay = actualStatus;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s5"> (</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>&lt;div className={</span><span class="s2">`rounded-xl shadow-lg p-4 transition-all duration-300 ease-in-out hover:shadow-2xl bg-white dark:bg-slate-800 border border-gray-200 dark:border-slate-700 flex flex-col min-h-[240px] justify-between`</span><span class="s5">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;div&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"flex items-center justify-between mb-2"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;h3 className=</span><span class="s2">"text-base sm:text-lg font-semibold text-gray-800 dark:text-white truncate"</span><span class="s5"> title={</span><span class="s3">String</span><span class="s5">(machine.machineName || </span><span class="s2">`Machine </span><span class="s5">${machine.id}</span><span class="s2">`</span><span class="s5">)}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{</span><span class="s3">String</span><span class="s2">(machine.machineName || </span><span class="s4">`Machine </span><span class="s2">${machine.id}</span><span class="s4">`</span><span class="s2">)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/h3&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className={</span><span class="s2">`px-2.5 py-1 rounded-full text-xs font-medium flex items-center flex-shrink-0 </span><span class="s5">${bgColor}</span><span class="s2"> </span><span class="s5">${textColor}</span><span class="s2">`</span><span class="s5">}&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{statusIcon}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;span className=</span><span class="s4">"truncate"</span><span class="s2">&gt;{</span><span class="s3">String</span><span class="s2">(badgeTextDisplay)}&lt;/span&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"mb-3 flex items-center text-sm text-gray-500 dark:text-slate-400"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;</span><span class="s3">MachineTypeSpecificIcon</span><span class="s5"> size={</span><span class="s7">16</span><span class="s5">} className=</span><span class="s2">"mr-2 text-slate-500 dark:text-slate-400 flex-shrink-0"</span><span class="s5"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;span&gt;{</span><span class="s3">String</span><span class="s2">(machine.</span><span class="s1">type</span><span class="s2"> || </span><span class="s4">'N/A'</span><span class="s2">)} - {</span><span class="s3">String</span><span class="s2">(machine.size || </span><span class="s4">'N/A'</span><span class="s2">)}&lt;/span&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>&lt;div className=</span><span class="s2">"flex-grow flex flex-col items-center justify-center my-2 text-center"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;p className={</span><span class="s4">`text-xl font-semibold </span><span class="s2">${textColor}</span><span class="s4">`</span><span class="s2">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{</span><span class="s3">String</span><span class="s2">(actualStatus)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{(machine.timeRemaining &gt; </span><span class="s7">0</span><span class="s2"> &amp;&amp; (actualStatus === </span><span class="s4">'In Use'</span><span class="s2"> || actualStatus === </span><span class="s4">'Finishing Soon'</span><span class="s2">) &amp;&amp; formattedTimeRemaining) &amp;&amp; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-4xl font-bold mt-1"</span><span class="s2"> style={{color: </span><span class="s3">UVM_GREEN</span><span class="s2">}}&gt;{formattedTimeRemaining}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>&lt;div className=</span><span class="s2">"mt-auto space-y-2 pt-2 border-t border-gray-100 dark:border-slate-700"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{canSetReminder &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>onClick={() =&gt; onSetReminder(machine)}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>disabled={isReminderSet}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>className={</span><span class="s2">`w-full font-semibold py-2.5 px-4 rounded-lg transition-all duration-200 text-sm flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                        </span></span><span class="s5">${isReminderSet<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                            </span>? </span><span class="s2">'bg-gray-300 dark:bg-slate-600 text-gray-500 dark:text-slate-400 cursor-not-allowed'</span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                            </span>: </span><span class="s2">'text-uvm-green hover:bg-opacity-80 focus:ring-uvm-gold'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>style={!isReminderSet ? {backgroundColor: </span><span class="s3">UVM_GOLD</span><span class="s2">} : {}}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{isReminderSet ? &lt;</span><span class="s3">BellOff</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-2"</span><span class="s2">/&gt; : &lt;</span><span class="s3">Bell</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-2"</span><span class="s2">/&gt;}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>{isReminderSet ? </span><span class="s2">'Browser Reminder Set'</span><span class="s5"> : </span><span class="s2">'Notify (Browser)'</span><span class="s5">}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">         </span>{canSetReminder &amp;&amp; (</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>onClick={() =&gt; onSetUpSmsAlert(machine)}</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>className=</span><span class="s2">"w-full font-semibold py-2.5 px-4 rounded-lg transition-all duration-200 text-sm flex items-center justify-center text-white focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 focus:ring-uvm-gold"</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>style={{backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s2">}}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>onMouseOver={(e) =&gt; e.currentTarget.style.backgroundColor = </span><span class="s4">'#0f3927'</span><span class="s2">} </span><span class="s9">// Darker green for hover</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>onMouseOut={(e) =&gt; e.currentTarget.style.backgroundColor = </span><span class="s3">UVM_GREEN</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;</span><span class="s3">MessageCircle</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-2"</span><span class="s2"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span></span><span class="s3">Set</span><span class="s2"> </span><span class="s3">SMS</span><span class="s2"> </span><span class="s3">Alert</span><span class="s2"> (via </span><span class="s3">Pi</span><span class="s2">)</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{!canSetReminder &amp;&amp; &lt;div className=</span><span class="s4">"h-10"</span><span class="s2">&gt;&lt;/div&gt;} {</span><span class="s9">/* Placeholder to maintain height if no buttons */</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p1"><span class="s2">});</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">RoomCard</span><span class="s2"> = </span><span class="s3">React</span><span class="s2">.memo(({ room, onSelectRoom, isFavorite, onToggleFavorite }) =&gt; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;div<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>onClick={() =&gt; onSelectRoom(room.id)}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>className=</span><span class="s2">"rounded-xl shadow-lg p-6 flex flex-col justify-between hover:shadow-2xl transition-all duration-300 cursor-pointer h-full min-h-[160px] group"</span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>style={{ backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s2"> }}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;h3 className=</span><span class="s2">"text-xl sm:text-2xl font-semibold mb-3 text-white group-hover:text-uvm-gold transition-colors"</span><span class="s5">&gt;{</span><span class="s3">String</span><span class="s5">(room.name)}&lt;/h3&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"flex items-center justify-end mt-auto pt-4"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>onClick={(e) =&gt; { e.stopPropagation(); onToggleFavorite(room.id); }}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>title={isFavorite ? </span><span class="s4">"Remove from Favorites"</span><span class="s2"> : </span><span class="s4">"Add to Favorites"</span><span class="s2">}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>className=</span><span class="s2">"p-2 rounded-full hover:bg-white/20 transition-colors"</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">Star</span><span class="s5"> size={</span><span class="s7">24</span><span class="s5">} className={</span><span class="s2">`transition-colors </span><span class="s5">${isFavorite ? </span><span class="s2">`text-[</span><span class="s5">${</span><span class="s3">UVM_GOLD</span><span class="s5">}</span><span class="s2">] fill-[</span><span class="s5">${</span><span class="s3">UVM_GOLD</span><span class="s5">}</span><span class="s2">]`</span><span class="s5"> : </span><span class="s2">'text-white/70 group-hover:text-white'</span><span class="s5">}</span><span class="s2">`</span><span class="s5">} /&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2">));</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p4"><span class="s2">// Main App Component</span></p>
<p class="p1"><span class="s1">const</span><span class="s2"> </span><span class="s3">App</span><span class="s2"> = () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [currentView, setCurrentView] = useState(</span><span class="s4">'home'</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [laundryRooms, setLaundryRooms] = useState([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [selectedRoomId, setSelectedRoomId] = useState(</span><span class="s4">''</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [machines, setMachines] = useState([]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [isLoadingRooms, setIsLoadingRooms] = useState(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [isLoadingMachines, setIsLoadingMachines] = useState(</span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [isBackgroundRefreshing, setIsBackgroundRefreshing] = useState(</span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [searchTerm, setSearchTerm] = useState(</span><span class="s4">''</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [filterStatus, setFilterStatus] = useState(</span><span class="s4">'All'</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [isDarkMode, setIsDarkMode] = useState(</span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [lastUpdated, setLastUpdated] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [error, setError] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [favorites, setFavorites] = useState(() =&gt; { </span><span class="s1">try</span><span class="s2"> { </span><span class="s1">const</span><span class="s2"> sf = localStorage.getItem(</span><span class="s4">'uvmLaundryFavorites'</span><span class="s2">); </span><span class="s1">return</span><span class="s2"> sf ? </span><span class="s3">JSON</span><span class="s2">.parse(sf) : []; } </span><span class="s1">catch</span><span class="s2"> (e) { console.error(</span><span class="s4">"Error parsing favorites from localStorage"</span><span class="s2">, e); </span><span class="s1">return</span><span class="s2"> []; } });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [showOnlyFavorites, setShowOnlyFavorites] = useState(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [reminders, setReminders] = useState(() =&gt; { </span><span class="s1">try</span><span class="s2"> { </span><span class="s1">const</span><span class="s2"> sr = localStorage.getItem(</span><span class="s4">'uvmLaundryReminders'</span><span class="s2">); </span><span class="s1">return</span><span class="s2"> sr ? </span><span class="s3">JSON</span><span class="s2">.parse(sr) : []; } </span><span class="s1">catch</span><span class="s2"> (e) { console.error(</span><span class="s4">"Error parsing reminders from localStorage"</span><span class="s2">, e); </span><span class="s1">return</span><span class="s2"> []; } });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [notificationPermission, setNotificationPermission] = useState(</span><span class="s4">'default'</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [showSmsModal, setShowSmsModal] = useState(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [smsMachine, setSmsMachine] = useState(</span><span class="s1">null</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [phoneNumber, setPhoneNumber] = useState(() =&gt; localStorage.getItem(</span><span class="s4">'uvmLaundryPhoneNumber'</span><span class="s2">) || </span><span class="s4">''</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> [smsStatus, setSmsStatus] = useState(</span><span class="s4">''</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s5"> </span><span class="s3">NGROK_BASE_URL</span><span class="s5"> = </span><span class="s2">'https://7eaa-172-56-118-125.ngrok-free.app'</span><span class="s5">;<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { </span><span class="s1">const</span><span class="s2"> mq = window.matchMedia(</span><span class="s4">'(prefers-color-scheme: dark)'</span><span class="s2">); setIsDarkMode(mq.matches); </span><span class="s1">const</span><span class="s2"> hc = (e) =&gt; setIsDarkMode(e.matches); mq.addEventListener(</span><span class="s4">'change'</span><span class="s2">, hc); </span><span class="s1">return</span><span class="s2"> () =&gt; mq.removeEventListener(</span><span class="s4">'change'</span><span class="s2">, hc); }, []);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { document.documentElement.classList.toggle(</span><span class="s4">'dark'</span><span class="s2">, isDarkMode); }, [isDarkMode]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { </span><span class="s1">if</span><span class="s2"> (</span><span class="s4">'Notification'</span><span class="s2"> </span><span class="s1">in</span><span class="s2"> window) setNotificationPermission(</span><span class="s3">Notification</span><span class="s2">.permission); }, []);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { </span><span class="s1">try</span><span class="s2"> { localStorage.setItem(</span><span class="s4">'uvmLaundryFavorites'</span><span class="s2">, </span><span class="s3">JSON</span><span class="s2">.stringify(favorites)); } </span><span class="s1">catch</span><span class="s2"> (e) { console.error(</span><span class="s4">"Error saving favorites to localStorage"</span><span class="s2">, e); } }, [favorites]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { </span><span class="s1">try</span><span class="s2"> { localStorage.setItem(</span><span class="s4">'uvmLaundryReminders'</span><span class="s2">, </span><span class="s3">JSON</span><span class="s2">.stringify(reminders)); } </span><span class="s1">catch</span><span class="s2"> (e) { console.error(</span><span class="s4">"Error saving reminders to localStorage"</span><span class="s2">, e); } }, [reminders]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { localStorage.setItem(</span><span class="s4">'uvmLaundryPhoneNumber'</span><span class="s2">, phoneNumber); }, [phoneNumber]);<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> requestNotificationPermission = useCallback(</span><span class="s1">async</span><span class="s2"> () =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (</span><span class="s4">'Notification'</span><span class="s2"> </span><span class="s1">in</span><span class="s2"> window &amp;&amp; </span><span class="s3">Notification</span><span class="s2">.permission === </span><span class="s4">'default'</span><span class="s2">) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> p = </span><span class="s1">await</span><span class="s2"> </span><span class="s3">Notification</span><span class="s2">.requestPermission();<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setNotificationPermission(p);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (p === </span><span class="s4">'granted'</span><span class="s2">) {</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">new</span><span class="s5"> </span><span class="s3">Notification</span><span class="s5">(</span><span class="s2">"UVM LaundryLink"</span><span class="s5">, { body: </span><span class="s2">"Hooray! Notifications are now enabled."</span><span class="s5">, icon: </span><span class="s3">UVM_LOGO_URL</span><span class="s5">, tag: </span><span class="s2">"permission-granted"</span><span class="s5"> });<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, []);</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> fetchRooms = useCallback(</span><span class="s1">async</span><span class="s2"> () =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>setIsLoadingRooms(</span><span class="s1">true</span><span class="s2">); setError(</span><span class="s1">null</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> roomsUrl = </span><span class="s4">`</span><span class="s2">${</span><span class="s3">NGROK_BASE_URL</span><span class="s2">}</span><span class="s4">/rooms`</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>console.log(</span><span class="s2">`Fetching available rooms from: </span><span class="s5">${roomsUrl}</span><span class="s2">`</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (</span><span class="s3">NGROK_BASE_URL</span><span class="s2">.includes(</span><span class="s4">'YOUR_NGROK_HTTPS_FORWARDING_URL_HERE'</span><span class="s2">) || </span><span class="s3">NGROK_BASE_URL</span><span class="s2">.length &lt; </span><span class="s7">20</span><span class="s2"> || !</span><span class="s3">NGROK_BASE_URL</span><span class="s2">.startsWith(</span><span class="s4">'https://'</span><span class="s2">)) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>setError(</span><span class="s2">"Configuration Error: The NGROK_BASE_URL in the app code needs to be a valid https ngrok forwarding URL from your Raspberry Pi."</span><span class="s5">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>setIsLoadingRooms(</span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>setLaundryRooms([]);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">return</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> r = </span><span class="s1">await</span><span class="s2"> fetch(roomsUrl, { headers: { </span><span class="s4">'ngrok-skip-browser-warning'</span><span class="s2">: </span><span class="s4">'true'</span><span class="s2"> } });<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (!r.ok) </span><span class="s1">throw</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Error</span><span class="s2">(</span><span class="s4">`Rooms fetch failed: </span><span class="s2">${r.status}</span><span class="s4"> </span><span class="s2">${r.statusText}</span><span class="s4">. URL: </span><span class="s2">${roomsUrl}</span><span class="s4">`</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> data = </span><span class="s1">await</span><span class="s2"> r.json();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLaundryRooms(</span><span class="s3">Array</span><span class="s2">.isArray(data) ? data.sort((a,b) =&gt; </span><span class="s3">String</span><span class="s2">(a.name).localeCompare(</span><span class="s3">String</span><span class="s2">(b.name))) : []);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>console.log(</span><span class="s4">"Fetched rooms:"</span><span class="s2">, data);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (e) {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>console.error(</span><span class="s2">"Error fetching room list:"</span><span class="s5">, e);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>setError(</span><span class="s2">`Failed to load room list. </span><span class="s5">${e.message}</span><span class="s2">. Ensure your Pi server and ngrok are running correctly. The ngrok URL in the code might need to be updated if it has changed.`</span><span class="s5">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLaundryRooms([]);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">finally</span><span class="s2"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setIsLoadingRooms(</span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">  </span>}, [</span><span class="s2">NGROK_BASE_URL</span><span class="s5">]);<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { fetchRooms(); }, [fetchRooms]);</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> fetchMachineData = useCallback(</span><span class="s1">async</span><span class="s2"> (roomIdToFetch, isBackground = </span><span class="s1">false</span><span class="s2">) =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!roomIdToFetch) { setMachines([]); </span><span class="s1">return</span><span class="s2">; }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!isBackground) setIsLoadingMachines(</span><span class="s1">true</span><span class="s2">); </span><span class="s1">else</span><span class="s2"> setIsBackgroundRefreshing(</span><span class="s1">true</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2">(!isBackground) setError(</span><span class="s1">null</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> machineDataUrl = </span><span class="s4">`</span><span class="s2">${</span><span class="s3">NGROK_BASE_URL</span><span class="s2">}</span><span class="s4">/laundry-data/</span><span class="s2">${roomIdToFetch}</span><span class="s4">`</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>console.log(</span><span class="s4">`</span><span class="s2">${isBackground ? </span><span class="s4">"Background refreshing"</span><span class="s2"> : </span><span class="s4">"Fetching"</span><span class="s2">}</span><span class="s4"> machines for '</span><span class="s2">${roomIdToFetch}</span><span class="s4">' from: </span><span class="s2">${machineDataUrl}</span><span class="s4">`</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> response = </span><span class="s1">await</span><span class="s2"> fetch(machineDataUrl, { headers: { </span><span class="s4">'ngrok-skip-browser-warning'</span><span class="s2">: </span><span class="s4">'true'</span><span class="s2"> } });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (!response.ok) </span><span class="s1">throw</span><span class="s2"> </span><span class="s1">new</span><span class="s2"> </span><span class="s3">Error</span><span class="s2">(</span><span class="s4">`Machines fetch failed for </span><span class="s2">${roomIdToFetch}</span><span class="s4">: </span><span class="s2">${response.status}</span><span class="s4"> </span><span class="s2">${response.statusText}</span><span class="s4">. URL: </span><span class="s2">${machineDataUrl}</span><span class="s4">`</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> jsonData = </span><span class="s1">await</span><span class="s2"> response.json();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setMachines(</span><span class="s3">Array</span><span class="s2">.isArray(jsonData) ? jsonData : []);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setLastUpdated(</span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">());</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s5">(isBackground &amp;&amp; error) setError(</span><span class="s1">null</span><span class="s5">); </span><span class="s2">// Clear error only if there was one and refresh is successful</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s2"> (e) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>console.error(</span><span class="s4">`Error fetching machines for '</span><span class="s2">${roomIdToFetch}</span><span class="s4">':`</span><span class="s2">, e);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">const</span><span class="s2"> roomName = laundryRooms.find(r=&gt;r.id === roomIdToFetch)?.name || roomIdToFetch;</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s5"> (!isBackground || machines.length === </span><span class="s7">0</span><span class="s5">) { </span><span class="s2">// Only show error prominently if foreground or no data yet</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>setError(</span><span class="s2">`Failed to load machines for </span><span class="s5">${</span><span class="s3">String</span><span class="s5">(roomName)}</span><span class="s2">. </span><span class="s5">${e.message}</span><span class="s2">. Check Pi server and ngrok status.`</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s2">(!isBackground) setMachines([]);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">finally</span><span class="s2"> { </span><span class="s1">if</span><span class="s2"> (!isBackground) setIsLoadingMachines(</span><span class="s1">false</span><span class="s2">); setIsBackgroundRefreshing(</span><span class="s1">false</span><span class="s2">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [</span><span class="s3">NGROK_BASE_URL</span><span class="s2">, laundryRooms, machines.length, error]); </span><span class="s9">// Added error to deps</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; { </span><span class="s1">if</span><span class="s2"> (selectedRoomId &amp;&amp; currentView === </span><span class="s4">'roomDetail'</span><span class="s2">) fetchMachineData(selectedRoomId, </span><span class="s1">false</span><span class="s2">); }, [selectedRoomId, currentView, fetchMachineData]);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!selectedRoomId || currentView !== </span><span class="s4">'roomDetail'</span><span class="s2">) </span><span class="s1">return</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> intervalId = setInterval(() =&gt; fetchMachineData(selectedRoomId, </span><span class="s1">true</span><span class="s2">), </span><span class="s7">30000</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> () =&gt; clearInterval(intervalId);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [selectedRoomId, currentView, fetchMachineData]);</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleSelectRoom = (roomId) =&gt; { setSelectedRoomId(roomId); setCurrentView(</span><span class="s4">'roomDetail'</span><span class="s2">); setSearchTerm(</span><span class="s4">''</span><span class="s2">); setFilterStatus(</span><span class="s4">'All'</span><span class="s2">); };<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleGoHome = () =&gt; { setCurrentView(</span><span class="s4">'home'</span><span class="s2">); setSelectedRoomId(</span><span class="s4">''</span><span class="s2">); setMachines([]); setError(</span><span class="s1">null</span><span class="s2">); setSearchTerm(</span><span class="s4">''</span><span class="s2">); setFilterStatus(</span><span class="s4">'All'</span><span class="s2">); };</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleRefresh = () =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span>setError(</span><span class="s1">null</span><span class="s5">); </span><span class="s2">// Clear previous errors on manual refresh</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (selectedRoomId &amp;&amp; currentView === </span><span class="s4">'roomDetail'</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>fetchMachineData(selectedRoomId, </span><span class="s1">false</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (currentView === </span><span class="s4">'home'</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>fetchRooms();<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> toggleFavorite = (roomId) =&gt; setFavorites(p =&gt; p.includes(roomId) ? p.filter(id =&gt; id !== roomId) : [...p, roomId]);</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> addReminderForMachine = useCallback((m) =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> r = laundryRooms.find(room =&gt; room.id === selectedRoomId);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>setReminders(prevReminders =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">if</span><span class="s2"> (prevReminders.find(rm =&gt; rm.machineId === m.id &amp;&amp; rm.roomId === selectedRoomId)) </span><span class="s1">return</span><span class="s2"> prevReminders;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">return</span><span class="s2"> [...prevReminders, {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>machineId: m.id,<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">              </span>roomId: selectedRoomId, </span><span class="s2">// Store roomId to ensure notification is for the correct context</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>machineName: </span><span class="s3">String</span><span class="s2">(m.machineName || m.id),<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>roomName: r ? </span><span class="s3">String</span><span class="s2">(r.name) : </span><span class="s4">'Selected Room'</span><span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>setAt: </span><span class="s3">Date</span><span class="s2">.now()<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>}];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">new</span><span class="s5"> </span><span class="s3">Notification</span><span class="s5">(</span><span class="s2">"UVM LaundryLink Reminder Set"</span><span class="s5">, {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>body: </span><span class="s2">`Reminder set for </span><span class="s5">${</span><span class="s3">String</span><span class="s5">(m.machineName || m.id)}</span><span class="s2"> in "</span><span class="s5">${r ? </span><span class="s3">String</span><span class="s5">(r.name) : </span><span class="s2">'Selected Room'</span><span class="s5">}</span><span class="s2">". You'll be notified when it's done.`</span><span class="s5">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>icon: </span><span class="s3">UVM_LOGO_URL</span><span class="s2">,</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>tag: </span><span class="s4">`reminder-set-</span><span class="s2">${m.id}</span><span class="s4">`</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [laundryRooms, selectedRoomId]);</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleSetReminder = useCallback((m) =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s5"> (!(</span><span class="s2">'Notification'</span><span class="s5"> </span><span class="s1">in</span><span class="s5"> window)) { alert(</span><span class="s2">"This browser does not support desktop notifications."</span><span class="s5">); </span><span class="s1">return</span><span class="s5">; }<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (notificationPermission === </span><span class="s4">'granted'</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>addReminderForMachine(m);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s2"> </span><span class="s1">if</span><span class="s2"> (notificationPermission === </span><span class="s4">'default'</span><span class="s2">) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>requestNotificationPermission().then(permissionResult =&gt; {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">if</span><span class="s2"> (permissionResult === </span><span class="s4">'granted'</span><span class="s2">) addReminderForMachine(m);<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s1">else</span><span class="s5"> alert(</span><span class="s2">"Notification permission was not granted. Please enable it in your browser settings to use this feature."</span><span class="s5">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>});</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">    </span>} </span><span class="s1">else</span><span class="s5"> { </span><span class="s2">// permission is 'denied'</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>alert(</span><span class="s2">"Notification permission has been denied. Please enable it in your browser settings to use this feature."</span><span class="s5">);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [notificationPermission, addReminderForMachine, requestNotificationPermission]);</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>useEffect(() =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (reminders.length === </span><span class="s7">0</span><span class="s2"> || machines.length === </span><span class="s7">0</span><span class="s2"> || notificationPermission !== </span><span class="s4">'granted'</span><span class="s2"> || currentView !== </span><span class="s4">'roomDetail'</span><span class="s2">) </span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">let</span><span class="s2"> triggeredANotification = </span><span class="s1">false</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> stillActiveReminders = [];</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>reminders.forEach(rem =&gt; {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s2">// Only process reminders for the currently viewed room</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (rem.roomId !== selectedRoomId) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>stillActiveReminders.push(rem);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span></span><span class="s1">return</span><span class="s2">;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> machineForReminder = machines.find(mc =&gt; mc.id === rem.machineId);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (machineForReminder) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">const</span><span class="s2"> { actualStatus } = getStatusDetails(machineForReminder.status);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span></span><span class="s1">if</span><span class="s2"> (actualStatus === </span><span class="s4">'Available'</span><span class="s2"> || actualStatus === </span><span class="s4">'Cycle Finished'</span><span class="s2">) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span></span><span class="s1">try</span><span class="s2"> {<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span></span><span class="s1">new</span><span class="s5"> </span><span class="s3">Notification</span><span class="s5">(</span><span class="s2">"UVM LaundryLink Reminder"</span><span class="s5">, {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>body: </span><span class="s4">`</span><span class="s2">${</span><span class="s3">String</span><span class="s2">(rem.machineName)}</span><span class="s4"> in "</span><span class="s2">${</span><span class="s3">String</span><span class="s2">(rem.roomName)}</span><span class="s4">" has finished!`</span><span class="s2">,<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                      </span>icon: </span><span class="s3">UVM_LOGO_URL</span><span class="s2">,</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">                      </span>tag: </span><span class="s4">`reminder-done-</span><span class="s5">${rem.machineId}</span><span class="s4">`</span><span class="s5"> </span><span class="s2">// Unique tag to prevent multiple similar notifications</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>});<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>} </span><span class="s1">catch</span><span class="s2"> (e) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>console.error(</span><span class="s4">"Error showing notification:"</span><span class="s2">, e);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>triggeredANotification = </span><span class="s1">true</span><span class="s2">;<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">              </span></span><span class="s2">// Do not add to stillActiveReminders, effectively removing it</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>stillActiveReminders.push(rem); </span><span class="s9">// Machine hasn't finished, keep reminder</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>} </span><span class="s1">else</span><span class="s2"> {</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span></span><span class="s2">// Machine not found in current list (e.g. Pi data changed), keep reminder for now or decide to remove</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>stillActiveReminders.push(rem);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>});</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (triggeredANotification) {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setReminders(stillActiveReminders);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>}, [machines, reminders, notificationPermission, currentView, selectedRoomId, setReminders]); </span><span class="s9">// Added setReminders</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleOpenSmsModal = (machine) =&gt; { setSmsMachine(machine); setShowSmsModal(</span><span class="s1">true</span><span class="s2">); setSmsStatus(</span><span class="s4">''</span><span class="s2">); };</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> handleSendSmsAlert = </span><span class="s1">async</span><span class="s2"> () =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!smsMachine || !phoneNumber.trim() || !selectedRoomId) { setSmsStatus(</span><span class="s4">"Error: Phone number and machine selection are required."</span><span class="s2">); </span><span class="s1">return</span><span class="s2">; }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">if</span><span class="s2"> (!</span><span class="s8">/^\d{10}$/</span><span class="s2">.test(phoneNumber.trim())) { setSmsStatus(</span><span class="s4">"Error: Please enter a valid 10-digit phone number."</span><span class="s2">); </span><span class="s1">return</span><span class="s2">; }</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">    </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>setSmsStatus(</span><span class="s2">"Sending SMS alert request..."</span><span class="s5">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">try</span><span class="s2"> {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> response = </span><span class="s1">await</span><span class="s2"> fetch(</span><span class="s4">`</span><span class="s2">${</span><span class="s3">NGROK_BASE_URL</span><span class="s2">}</span><span class="s4">/set-sms-alert`</span><span class="s2">, { method: </span><span class="s4">'POST'</span><span class="s2">, headers: { </span><span class="s4">'Content-Type'</span><span class="s2">: </span><span class="s4">'application/json'</span><span class="s2">, </span><span class="s4">'ngrok-skip-browser-warning'</span><span class="s2">: </span><span class="s4">'true'</span><span class="s2"> }, body: </span><span class="s3">JSON</span><span class="s2">.stringify({ roomId: selectedRoomId, machineName: smsMachine.machineName, phoneNumber: phoneNumber.trim() }) });</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">const</span><span class="s2"> result = </span><span class="s1">await</span><span class="s2"> response.json();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span></span><span class="s1">if</span><span class="s2"> (response.ok &amp;&amp; result.success) {<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>setSmsStatus(</span><span class="s4">`Success: </span><span class="s2">${result.message || </span><span class="s4">'SMS alert request submitted.'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">);<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">        </span>setTimeout(() =&gt; { </span><span class="s2">// Auto-close modal on success after a delay</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>setShowSmsModal(</span><span class="s1">false</span><span class="s2">);</span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">            </span>setSmsStatus(</span><span class="s4">''</span><span class="s5">); </span><span class="s2">// Reset status for next time</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>}, </span><span class="s7">2500</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span></span><span class="s1">else</span><span class="s5"> { </span><span class="s1">throw</span><span class="s5"> </span><span class="s1">new</span><span class="s5"> </span><span class="s3">Error</span><span class="s5">(result.error || </span><span class="s2">"Failed to set SMS alert via Pi server."</span><span class="s5">); }</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>} </span><span class="s1">catch</span><span class="s5"> (err) { console.error(</span><span class="s2">"Error setting SMS alert via Pi:"</span><span class="s5">, err); setSmsStatus(</span><span class="s2">`Error: </span><span class="s5">${err.message}</span><span class="s2">. Please ensure the Pi server is running and accessible.`</span><span class="s5">); }</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>};</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> displayedRooms = showOnlyFavorites ? laundryRooms.filter(room =&gt; favorites.includes(room.id)) : laundryRooms;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> filteredMachines = machines.filter(machine =&gt; {</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> { actualStatus: machineActualStatus } = getStatusDetails(machine.status);<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> searchLower = searchTerm.toLowerCase();</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> matchesSearch = (</span><span class="s3">String</span><span class="s2">(machine.machineName || </span><span class="s4">''</span><span class="s2">)).toLowerCase().includes(searchLower) ||</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>(</span><span class="s3">String</span><span class="s2">(machine.id || </span><span class="s4">''</span><span class="s2">)).toLowerCase().includes(searchLower) ||<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>(</span><span class="s3">String</span><span class="s2">(machine.</span><span class="s1">type</span><span class="s2"> || </span><span class="s4">''</span><span class="s2">)).toLowerCase().includes(searchLower) ||</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                          </span>(machine.size &amp;&amp; </span><span class="s3">String</span><span class="s2">(machine.size).toLowerCase().includes(searchLower));</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">const</span><span class="s2"> matchesStatus = filterStatus === </span><span class="s4">'All'</span><span class="s2"> || machineActualStatus === filterStatus;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span></span><span class="s1">return</span><span class="s2"> matchesSearch &amp;&amp; matchesStatus;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>});</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">  </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> totalWashersInRoom = machines.filter(m =&gt; m.</span><span class="s1">type</span><span class="s2"> === </span><span class="s4">'Washer'</span><span class="s2">).length;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> availableWashersInRoom = machines.filter(m =&gt; getStatusDetails(m.status).actualStatus === </span><span class="s4">'Available'</span><span class="s2"> &amp;&amp; m.</span><span class="s1">type</span><span class="s2"> === </span><span class="s4">'Washer'</span><span class="s2">).length;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> totalDryersInRoom = machines.filter(m =&gt; m.</span><span class="s1">type</span><span class="s2"> === </span><span class="s4">'Dryer'</span><span class="s2">).length;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> availableDryersInRoom = machines.filter(m =&gt; getStatusDetails(m.status).actualStatus === </span><span class="s4">'Available'</span><span class="s2"> &amp;&amp; m.</span><span class="s1">type</span><span class="s2"> === </span><span class="s4">'Dryer'</span><span class="s2">).length;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s5"> statusOptions = [</span><span class="s2">'All'</span><span class="s5">, </span><span class="s2">'Available'</span><span class="s5">, </span><span class="s2">'In Use'</span><span class="s5">, </span><span class="s2">'Finishing Soon'</span><span class="s5">, </span><span class="s2">'Cycle Finished'</span><span class="s5">, </span><span class="s2">'Out of Order'</span><span class="s5">, </span><span class="s2">'Unknown'</span><span class="s5">];</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> currentRoomName = laundryRooms.find(room =&gt; room.id === selectedRoomId)?.name || (currentView === </span><span class="s4">'roomDetail'</span><span class="s2"> ? </span><span class="s4">"Loading Room..."</span><span class="s2"> : </span><span class="s4">"All Rooms"</span><span class="s2">);</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span></span><span class="s1">const</span><span class="s2"> currentRoomOfficialUrl = laundryRooms.find(room =&gt; room.id === selectedRoomId)?.url;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p6"><span class="s5"><span class="Apple-converted-space">  </span></span><span class="s2">return</span><span class="s5"> (</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">    </span>&lt;div className={</span><span class="s2">`min-h-screen </span><span class="s5">${isDarkMode ? </span><span class="s2">'bg-slate-900'</span><span class="s5"> : </span><span class="s2">'bg-gray-50'</span><span class="s5">}</span><span class="s2"> font-sans transition-colors duration-300`</span><span class="s5">}&gt; {</span><span class="s9">/* Slightly lighter light mode bg */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;header className=</span><span class="s4">"sticky top-0 z-50 shadow-lg"</span><span class="s2"> style={{ backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s2"> }}&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"container mx-auto px-4 sm:px-6 lg:px-8"</span><span class="s5">&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"flex items-center justify-between h-16"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s4">"flex items-center"</span><span class="s2">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;img src={</span><span class="s3">UVM_LOGO_URL</span><span class="s2">} alt=</span><span class="s4">"UVM Logo"</span><span class="s2"> className=</span><span class="s4">"h-10 w-auto mr-3 rounded-sm"</span><span class="s2"> onError={(e) =&gt; { e.currentTarget.style.display=</span><span class="s4">'none'</span><span class="s2">; }}/&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;h1 className=</span><span class="s2">"text-xl md:text-2xl font-bold text-white tracking-tight"</span><span class="s5">&gt;</span><span class="s3">UVM</span><span class="s5"> </span><span class="s3">LaundryLink</span><span class="s5">&lt;/h1&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex items-center space-x-1 sm:space-x-2"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>{currentView === </span><span class="s4">'roomDetail'</span><span class="s2"> &amp;&amp; ( &lt;button onClick={handleGoHome} className=</span><span class="s4">"p-2 text-white hover:bg-white/20 rounded-full transition-colors"</span><span class="s2"> title=</span><span class="s4">"Back to All Rooms"</span><span class="s2">&gt; &lt;</span><span class="s3">Home</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} /&gt; &lt;/button&gt; )}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;button onClick={handleRefresh} className=</span><span class="s4">"p-2 text-white hover:bg-white/20 rounded-full transition-colors"</span><span class="s2"> title=</span><span class="s4">"Refresh Data"</span><span class="s2">&gt; &lt;</span><span class="s3">RefreshCw</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} className={(isLoadingRooms || isLoadingMachines || isBackgroundRefreshing) ? </span><span class="s4">'animate-spin'</span><span class="s2"> : </span><span class="s4">''</span><span class="s2">} /&gt; &lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;button onClick={() =&gt; setIsDarkMode(!isDarkMode)} className=</span><span class="s4">"p-2 text-white hover:bg-white/20 rounded-full transition-colors"</span><span class="s2"> title=</span><span class="s4">"Toggle Dark Mode"</span><span class="s2">&gt; {isDarkMode ? &lt;</span><span class="s3">Sun</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} /&gt; : &lt;</span><span class="s3">Moon</span><span class="s2"> size={</span><span class="s7">20</span><span class="s2">} /&gt;} &lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/header&gt;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>&lt;main className={</span><span class="s2">`container mx-auto p-4 sm:p-6 lg:p-8`</span><span class="s5">}&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{error &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"mb-6 p-4 bg-red-100 dark:bg-red-900/50 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-300 rounded-lg shadow-lg"</span><span class="s5"> role=</span><span class="s2">"alert"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s4">"flex items-center mb-2"</span><span class="s2">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;</span><span class="s3">AlertTriangle</span><span class="s5"> size={</span><span class="s7">24</span><span class="s5">} className=</span><span class="s2">"mr-3 text-red-500 dark:text-red-400 flex-shrink-0"</span><span class="s5"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;p className=</span><span class="s4">"font-semibold text-lg"</span><span class="s2">&gt;</span><span class="s3">Data</span><span class="s2"> </span><span class="s3">Update</span><span class="s2"> </span><span class="s3">Error</span><span class="s2">&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-sm break-words"</span><span class="s2">&gt;{error}&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-xs mt-2 opacity-80"</span><span class="s2">&gt;</span><span class="s3">Tip</span><span class="s2">: </span><span class="s3">Ensure</span><span class="s2"> your </span><span class="s3">Pi</span><span class="s2"> server &amp; ngrok are running. </span><span class="s3">Check</span><span class="s2"> the ngrok </span><span class="s3">URL</span><span class="s2"> </span><span class="s1">in</span><span class="s2"> the app code. </span><span class="s3">Try</span><span class="s2"> opening the ngrok </span><span class="s3">URL</span><span class="s2"> directly </span><span class="s1">in</span><span class="s2"> your browser. </span><span class="s3">Check</span><span class="s2"> the browser</span><span class="s4">'s developer console (F12) for more details.&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{currentView === </span><span class="s4">'home'</span><span class="s2"> &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex flex-col sm:flex-row justify-between items-center mb-6 gap-4"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;h2 className={</span><span class="s4">`text-3xl font-bold </span><span class="s2">${isDarkMode ? </span><span class="s4">'text-white'</span><span class="s2"> : </span><span class="s4">'text-uvm-green'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">}&gt;</span><span class="s3">All</span><span class="s2"> </span><span class="s3">Laundry</span><span class="s2"> </span><span class="s3">Rooms</span><span class="s2">&lt;/h2&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>onClick={() =&gt; setShowOnlyFavorites(!showOnlyFavorites)}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span>className={</span><span class="s2">`flex items-center px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-900 focus:ring-uvm-gold</span></p>
<p class="p5"><span class="s2"><span class="Apple-converted-space">                              </span></span><span class="s5">${showOnlyFavorites<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                                </span>? </span><span class="s2">'bg-uvm-gold text-uvm-green shadow-md hover:bg-opacity-90'</span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                                </span>: </span><span class="s2">`</span><span class="s5">${isDarkMode ? </span><span class="s2">'bg-slate-700 hover:bg-slate-600'</span><span class="s5"> : </span><span class="s2">'bg-gray-200 hover:bg-gray-300'</span><span class="s5">}</span><span class="s2"> text-uvm-green dark:text-slate-200`</span><span class="s5">}</span><span class="s2">`</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">Star</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-2"</span><span class="s2">/&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>{showOnlyFavorites ? </span><span class="s4">"Show All"</span><span class="s2"> : </span><span class="s4">"Show Favorites"</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/button&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{isLoadingRooms ? (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"text-center py-10 text-gray-600 dark:text-gray-400"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">RefreshCw</span><span class="s2"> size={</span><span class="s7">48</span><span class="s2">} className=</span><span class="s4">"mx-auto animate-spin"</span><span class="s2"> style={{color: </span><span class="s3">UVM_GREEN</span><span class="s2">}} /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s4">"mt-2 text-lg"</span><span class="s2">&gt;</span><span class="s3">Loading</span><span class="s2"> </span><span class="s3">Rooms</span><span class="s2">...&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>) : displayedRooms.length === </span><span class="s7">0</span><span class="s2"> ? (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"text-center py-16 text-gray-500 dark:text-gray-400 bg-white dark:bg-slate-800 rounded-xl shadow-md"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">Info</span><span class="s2"> size={</span><span class="s7">56</span><span class="s2">} className=</span><span class="s4">"mx-auto opacity-70"</span><span class="s2"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s4">"mt-4 text-xl"</span><span class="s2">&gt;{showOnlyFavorites &amp;&amp; laundryRooms.length &gt; </span><span class="s7">0</span><span class="s2"> ? </span><span class="s4">"No favorite rooms yet."</span><span class="s2"> : </span><span class="s4">"No laundry rooms found."</span><span class="s2">}&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s2">"text-sm mt-1"</span><span class="s5">&gt;{showOnlyFavorites &amp;&amp; laundryRooms.length &gt; </span><span class="s7">0</span><span class="s5"> ? </span><span class="s2">"Tap the star on a room card to add it to your favorites!"</span><span class="s5"> : </span><span class="s2">"Please check your Raspberry Pi connection or ngrok setup."</span><span class="s5">}&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>) : (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{displayedRooms.map(room =&gt; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">RoomCard</span><span class="s2"> key={room.id} room={room} onSelectRoom={handleSelectRoom} isFavorite={favorites.includes(room.id)} onToggleFavorite={toggleFavorite} /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>))}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>)}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">        </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>{currentView === </span><span class="s4">'roomDetail'</span><span class="s2"> &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex flex-col sm:flex-row items-center justify-between mb-6 gap-3"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;button onClick={handleGoHome} className={</span><span class="s2">`flex items-center text-sm font-medium rounded-lg px-3 py-2 hover:bg-gray-200 dark:hover:bg-slate-700 </span><span class="s5">${isDarkMode ? </span><span class="s2">'text-white'</span><span class="s5"> : </span><span class="s2">'text-uvm-green'</span><span class="s5">}</span><span class="s2"> transition-colors focus:outline-none focus:ring-2 focus:ring-uvm-gold`</span><span class="s5">}&gt; &lt;</span><span class="s3">ArrowLeft</span><span class="s5"> size={</span><span class="s7">18</span><span class="s5">} className=</span><span class="s2">"mr-2"</span><span class="s5">/&gt; </span><span class="s3">Back</span><span class="s5"> &lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;h2 className={</span><span class="s4">`text-2xl md:text-3xl font-bold text-center flex-1 sm:mx-4 truncate </span><span class="s2">${isDarkMode ? </span><span class="s4">'text-white'</span><span class="s2"> : </span><span class="s4">'text-uvm-green'</span><span class="s2">}</span><span class="s4">`</span><span class="s2">} title={</span><span class="s3">String</span><span class="s2">(currentRoomName)}&gt;{</span><span class="s3">String</span><span class="s2">(currentRoomName)}&lt;/h2&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">              </span>{</span><span class="s2">/* Invisible div for balancing, only on larger screens if needed */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s4">"sm:w-auto hidden sm:block"</span><span class="s2"> style={{minWidth: </span><span class="s4">'80px'</span><span class="s2">}}&gt; {</span><span class="s9">/* Ensure it has some width for balance */</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>{currentRoomOfficialUrl &amp;&amp; (</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                    </span>&lt;a href={currentRoomOfficialUrl} target=</span><span class="s2">"_blank"</span><span class="s5"> rel=</span><span class="s2">"noopener noreferrer"</span><span class="s5"> className=</span><span class="s2">"inline-flex items-center px-3 py-2 border border-transparent text-xs font-medium rounded-md shadow-sm text-white transition-colors duration-150 hover:opacity-80 whitespace-nowrap"</span><span class="s5"> style={{ backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s5"> }} title=</span><span class="s2">"Visit Official Tracker"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;</span><span class="s3">ExternalLink</span><span class="s2"> size={</span><span class="s7">16</span><span class="s2">} className=</span><span class="s4">"mr-1.5"</span><span class="s2"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span></span><span class="s3">Official</span><span class="s2"> </span><span class="s3">Site</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>&lt;/a&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                 </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">            </span></span></p>
<p class="p4"><span class="s5"><span class="Apple-converted-space">             </span>{</span><span class="s2">/* Official Tracker link more prominent for mobile below header */</span><span class="s5">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{currentRoomOfficialUrl &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s4">"my-4 text-center sm:hidden"</span><span class="s2">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>&lt;a href={currentRoomOfficialUrl} target=</span><span class="s2">"_blank"</span><span class="s5"> rel=</span><span class="s2">"noopener noreferrer"</span><span class="s5"> className=</span><span class="s2">"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white transition-colors duration-150 hover:opacity-80"</span><span class="s5"> style={{ backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s5"> }} &gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">ExternalLink</span><span class="s2"> size={</span><span class="s7">18</span><span class="s2">} className=</span><span class="s4">"mr-2"</span><span class="s2"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p2"><span class="s5"><span class="Apple-converted-space">                  </span></span><span class="s2">Visit</span><span class="s5"> </span><span class="s2">Official</span><span class="s5"> </span><span class="s2">Tracker</span><span class="s5"> &amp; </span><span class="s2">Set</span><span class="s5"> </span><span class="s2">Alerts</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/a&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>)}</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">            </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"mb-6 p-4 sm:p-6 bg-white dark:bg-slate-800 rounded-xl shadow-xl"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"grid grid-cols-1 md:grid-cols-2 gap-4 items-end"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;label htmlFor=</span><span class="s2">"search"</span><span class="s5"> className=</span><span class="s2">"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1"</span><span class="s5">&gt;</span><span class="s3">Search</span><span class="s5"> </span><span class="s3">Machines</span><span class="s5">&lt;/label&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;input </span><span class="s1">type</span><span class="s5">=</span><span class="s2">"text"</span><span class="s5"> id=</span><span class="s2">"search"</span><span class="s5"> placeholder=</span><span class="s2">"e.g., Washer 13, Dryer, Large"</span><span class="s5"> value={searchTerm} onChange={(e) =&gt; setSearchTerm(e.target.value)} className=</span><span class="s2">"w-full p-2.5 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-uvm-gold focus:border-uvm-gold dark:bg-slate-700 dark:text-white transition-colors"</span><span class="s5"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;label htmlFor=</span><span class="s2">"statusFilter"</span><span class="s5"> className=</span><span class="s2">"block text-sm font-medium text-gray-700 dark:text-slate-300 mb-1"</span><span class="s5">&gt;</span><span class="s3">Filter</span><span class="s5"> by </span><span class="s3">Status</span><span class="s5">&lt;/label&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                  </span>&lt;select id=</span><span class="s2">"statusFilter"</span><span class="s5"> value={filterStatus} onChange={(e) =&gt; setFilterStatus(e.target.value)} className=</span><span class="s2">"w-full p-2.5 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm focus:ring-uvm-gold focus:border-uvm-gold dark:bg-slate-700 dark:text-white transition-colors"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                    </span>{statusOptions.map(opt =&gt; &lt;option key={opt} value={opt}&gt;{opt}&lt;/option&gt;)}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;/select&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"mt-5 grid grid-cols-1 sm:grid-cols-2 gap-x-4 gap-y-2 text-sm text-gray-700 dark:text-slate-300"</span><span class="s5">&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p&gt;</span><span class="s3">Washers</span><span class="s2">: &lt;span className=</span><span class="s4">"font-semibold text-uvm-green dark:text-uvm-gold"</span><span class="s2">&gt;{availableWashersInRoom}&lt;/span&gt; </span><span class="s3">Available</span><span class="s2"> / &lt;span className=</span><span class="s4">"font-semibold"</span><span class="s2">&gt;{totalWashersInRoom}&lt;/span&gt; </span><span class="s3">Total</span><span class="s2">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p&gt;</span><span class="s3">Dryers</span><span class="s2">: &lt;span className=</span><span class="s4">"font-semibold text-uvm-green dark:text-uvm-gold"</span><span class="s2">&gt;{availableDryersInRoom}&lt;/span&gt; </span><span class="s3">Available</span><span class="s2"> / &lt;span className=</span><span class="s4">"font-semibold"</span><span class="s2">&gt;{totalDryersInRoom}&lt;/span&gt; </span><span class="s3">Total</span><span class="s2">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>{lastUpdated &amp;&amp; &lt;p className=</span><span class="s4">"text-xs text-gray-500 dark:text-slate-400 mt-3 text-right"</span><span class="s2">&gt;</span><span class="s3">Last</span><span class="s2"> </span><span class="s3">Updated</span><span class="s2">: {lastUpdated.toLocaleTimeString()}&lt;/p&gt;}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{(isLoadingMachines &amp;&amp; machines.length === </span><span class="s7">0</span><span class="s2"> &amp;&amp; !isBackgroundRefreshing) ? (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"text-center py-10 text-gray-600 dark:text-gray-400"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">RefreshCw</span><span class="s2"> size={</span><span class="s7">48</span><span class="s2">} className=</span><span class="s4">"mx-auto animate-spin"</span><span class="s2"> style={{color: </span><span class="s3">UVM_GREEN</span><span class="s2">}} /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s4">"mt-2 text-lg"</span><span class="s2">&gt;</span><span class="s3">Loading</span><span class="s2"> </span><span class="s3">Machines</span><span class="s2"> </span><span class="s1">for</span><span class="s2"> {currentRoomName}...&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>) : (filteredMachines.length === </span><span class="s7">0</span><span class="s2"> &amp;&amp; !error &amp;&amp; !isLoadingMachines) ? (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"text-center py-16 text-gray-500 dark:text-gray-400 bg-white dark:bg-slate-800 rounded-xl shadow-md"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;</span><span class="s3">Info</span><span class="s2"> size={</span><span class="s7">56</span><span class="s2">} className=</span><span class="s4">"mx-auto opacity-70"</span><span class="s2"> /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s4">"mt-4 text-xl"</span><span class="s2">&gt;</span><span class="s3">No</span><span class="s2"> </span><span class="s3">Machines</span><span class="s2"> </span><span class="s3">Found</span><span class="s2">&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>&lt;p className=</span><span class="s4">"text-sm mt-1"</span><span class="s2">&gt;</span><span class="s3">No</span><span class="s2"> machines </span><span class="s1">in</span><span class="s2"> {currentRoomName} match your current search/filter criteria.&lt;/p&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>) : (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;div className=</span><span class="s2">"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-5 md:gap-6"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{filteredMachines.map(machine =&gt; (<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                  </span>&lt;</span><span class="s3">MachineCard</span><span class="s2"> key={machine.id || </span><span class="s3">String</span><span class="s2">(machine.machineName) + </span><span class="s3">String</span><span class="s2">(machine.node) } machine={machine} onSetReminder={handleSetReminder} isReminderSet={reminders.some(r =&gt; r.machineId === machine.id &amp;&amp; r.roomId === selectedRoomId)} onSetUpSmsAlert={handleOpenSmsModal} /&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>))}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/main&gt;</span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">      </span>&lt;footer className=</span><span class="s2">"mt-16 py-8 border-t border-gray-200 dark:border-slate-700 bg-gray-100 dark:bg-slate-800/50"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"container mx-auto px-4 sm:px-6 lg:px-8 text-center text-gray-500 dark:text-slate-400 text-sm"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;p&gt;&amp;copy; {</span><span class="s1">new</span><span class="s2"> </span><span class="s3">Date</span><span class="s2">().getFullYear()} </span><span class="s3">UVM</span><span class="s2"> </span><span class="s3">LaundryLink</span><span class="s2">.&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;p className=</span><span class="s4">"mt-1"</span><span class="s2">&gt;</span><span class="s3">Created</span><span class="s2"> by </span><span class="s3">Ivan</span><span class="s2"> </span><span class="s3">Minier</span><span class="s2">&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>&lt;/footer&gt;</span></p>
<p class="p3"><span class="s2"><span class="Apple-converted-space">      </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>{showSmsModal &amp;&amp; smsMachine &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">        </span>&lt;div className=</span><span class="s2">"fixed inset-0 bg-black bg-opacity-60 backdrop-blur-sm flex items-center justify-center p-4 z-[100]"</span><span class="s5"> onClick={() =&gt; setShowSmsModal(</span><span class="s1">false</span><span class="s5">)}&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">          </span>&lt;div className=</span><span class="s2">"bg-white dark:bg-slate-800 p-6 rounded-xl shadow-2xl max-w-md w-full"</span><span class="s5"> onClick={(e) =&gt; e.stopPropagation()}&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"flex justify-between items-center mb-4"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;h3 className=</span><span class="s4">"text-xl font-semibold text-gray-800 dark:text-white"</span><span class="s2">&gt;</span><span class="s3">Set</span><span class="s2"> </span><span class="s3">SMS</span><span class="s2"> </span><span class="s3">Alert</span><span class="s2">: &lt;span className=</span><span class="s4">"text-uvm-green dark:text-uvm-gold"</span><span class="s2">&gt;{</span><span class="s3">String</span><span class="s2">(smsMachine.machineName)}&lt;/span&gt;&lt;/h3&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;button onClick={() =&gt; setShowSmsModal(</span><span class="s1">false</span><span class="s5">)} className=</span><span class="s2">"p-1.5 rounded-full hover:bg-gray-200 dark:hover:bg-slate-700 text-gray-500 dark:text-gray-400 transition-colors"</span><span class="s5">&gt; &lt;</span><span class="s3">XCircle</span><span class="s5"> size={</span><span class="s7">24</span><span class="s5">} /&gt; &lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-sm text-gray-600 dark:text-slate-300 mb-1"</span><span class="s2">&gt;</span><span class="s3">Your</span><span class="s2"> </span><span class="s3">Pi</span><span class="s2"> server will attempt to </span><span class="s1">set</span><span class="s2"> an </span><span class="s3">SMS</span><span class="s2"> alert on the official laundry website.&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;p className=</span><span class="s4">"text-xs text-yellow-600 dark:text-yellow-400 mb-4"</span><span class="s2">&gt;</span><span class="s3">Note</span><span class="s2">: </span><span class="s3">This</span><span class="s2"> feature </span><span class="s1">is</span><span class="s2"> experimental and may not always work </span><span class="s1">if</span><span class="s2"> the official website changes. </span><span class="s3">Use</span><span class="s2"> the </span><span class="s4">"Visit Official Tracker"</span><span class="s2"> link </span><span class="s1">for</span><span class="s2"> the most reliable alert setup.&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s4">"mb-4"</span><span class="s2">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;label htmlFor=</span><span class="s2">"phoneNumber"</span><span class="s5"> className=</span><span class="s2">"block text-sm font-medium text-gray-700 dark:text-slate-300"</span><span class="s5">&gt;</span><span class="s3">Phone</span><span class="s5"> </span><span class="s3">Number</span><span class="s5"> (</span><span class="s7">10</span><span class="s5"> digits):&lt;/label&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;input<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s1">type</span><span class="s2">=</span><span class="s4">"tel"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>id=</span><span class="s4">"phoneNumber"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>value={phoneNumber}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>onChange={(e) =&gt; setPhoneNumber(e.target.value.replace(</span><span class="s8">/\D/</span><span class="s1">g</span><span class="s2">, </span><span class="s4">''</span><span class="s2">).slice(</span><span class="s7">0</span><span class="s2">,</span><span class="s7">10</span><span class="s2">))}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>placeholder=</span><span class="s4">"e.g., 8025551234"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>className=</span><span class="s2">"mt-1 block w-full px-3 py-2.5 border border-gray-300 dark:border-slate-600 rounded-lg shadow-sm focus:outline-none focus:ring-2 focus:ring-uvm-gold focus:border-uvm-gold sm:text-sm dark:bg-slate-700 dark:text-white transition-colors"</span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>maxLength=</span><span class="s4">"10"</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>/&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>{smsStatus &amp;&amp; (<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;p className={</span><span class="s2">`text-sm my-3 p-3 rounded-lg </span><span class="s5">${smsStatus.toLowerCase().startsWith(</span><span class="s2">"error"</span><span class="s5">) ? </span><span class="s2">'bg-red-100 dark:bg-red-900/50 text-red-700 dark:text-red-300 border border-red-300 dark:border-red-600'</span><span class="s5"> : (smsStatus.toLowerCase().startsWith(</span><span class="s2">"success"</span><span class="s5">) ? </span><span class="s2">'bg-green-100 dark:bg-green-900/50 text-green-700 dark:text-green-300 border border-green-300 dark:border-green-600'</span><span class="s5"> : </span><span class="s2">'bg-blue-100 dark:bg-blue-900/50 text-blue-700 dark:text-blue-300 border border-blue-300 dark:border-blue-600'</span><span class="s5">)}</span><span class="s2">`</span><span class="s5">}&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{smsStatus}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/p&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>)}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">            </span>&lt;div className=</span><span class="s2">"mt-6 flex justify-end space-x-3"</span><span class="s5">&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">              </span>&lt;button onClick={() =&gt; setShowSmsModal(</span><span class="s1">false</span><span class="s5">)} className=</span><span class="s2">"px-4 py-2 rounded-lg text-gray-700 dark:text-slate-200 bg-gray-200 dark:bg-slate-600 hover:bg-gray-300 dark:hover:bg-slate-500 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-400"</span><span class="s5">&gt;</span><span class="s3">Cancel</span><span class="s5">&lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;button<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>onClick={handleSendSmsAlert}<span class="Apple-converted-space"> </span></span></p>
<p class="p5"><span class="s5"><span class="Apple-converted-space">                </span>className=</span><span class="s2">"px-4 py-2 rounded-lg text-white font-medium transition-colors flex items-center justify-center focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 focus:ring-uvm-gold"</span><span class="s5"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>style={{backgroundColor: </span><span class="s3">UVM_GREEN</span><span class="s2">}}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>onMouseOver={(e) =&gt; e.currentTarget.style.backgroundColor = </span><span class="s4">'#0f3927'</span><span class="s2">}<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>onMouseOut={(e) =&gt; e.currentTarget.style.backgroundColor = </span><span class="s3">UVM_GREEN</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>disabled={smsStatus.toLowerCase().includes(</span><span class="s4">"sending"</span><span class="s2">)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span>{smsStatus.toLowerCase().includes(</span><span class="s4">"sending"</span><span class="s2">) ? &lt;</span><span class="s3">RefreshCw</span><span class="s2"> size={</span><span class="s7">18</span><span class="s2">} className=</span><span class="s4">"animate-spin mr-2"</span><span class="s2"> /&gt; : </span><span class="s1">null</span><span class="s2">}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">                </span></span><span class="s3">Set</span><span class="s2"> </span><span class="s3">SMS</span><span class="s2"> </span><span class="s3">Alert</span><span class="s2"><span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">              </span>&lt;/button&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">            </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">          </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">        </span>&lt;/div&gt;<span class="Apple-converted-space"> </span></span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">      </span>)}</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">    </span>&lt;/div&gt;</span></p>
<p class="p1"><span class="s2"><span class="Apple-converted-space">  </span>);</span></p>
<p class="p1"><span class="s2">};</span></p>
<p class="p3"><span class="s6"></span><br></p>
<p class="p6"><span class="s2">export</span><span class="s5"> </span><span class="s2">default</span><span class="s5"> </span><span class="s3">App</span><span class="s5">;</span></p>
<p class="p3"><span class="s6"></span><br></p>
</body>
</html>
